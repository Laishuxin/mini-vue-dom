{"version":3,"file":"vue.js","sources":["../../src/observer/proxy.js","../../src/observer/reactive.js","../../src/observer/observeArr.js","../../src/config.js","../../src/observer/array.js","../../src/observer/observer.js","../../src/observer/observe.js","../../src/state.js","../../src/helper/utils.js","../../src/compiler/astParser.js","../../src/compiler/index.js","../../src/init.js","../../src/index.js"],"sourcesContent":["function proxyData(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key];\n    },\n    set(newValue) {\n      vm[target][key] = newValue;\n    },\n  });\n}\n\nexport default proxyData;\n","import observe from \"./observe\";\n\nfunction defineReactiveData(data, key, value) {\n  // value可能也是一个对象\n  observe(value)\n  Object.defineProperty(data, key, {\n    get() {\n      console.log(\"响应式数据：获取\", value);\n      return value;\n    },\n    set(newValue) {\n      console.log(\"响应式数据：设置\", value);\n      if(newValue==value) return;\n      // newValue可能也是一个对象\n      observe(newValue)\n      value = newValue;\n    },\n  });\n}\nexport default defineReactiveData;\n","import observe from './observe'\nfunction observeArr(arr){\n    for(var i=0;i<arr.length;i++){\n        observe(arr[i])\n    }\n}\nexport default observeArr","//所有会改变原数组内容的原生方法\nvar ARR_METHODS = [\n  \"push\",\n  \"pop\",\n  \"shift\",\n  \"unshift\",\n  \"splice\",\n  \"sort\",\n  \"reverse\",\n];\n\nexport { ARR_METHODS };\n","/* 重写Array原型链上所有可能改变原数组的方法\n*  push新增的对象可能是对象或者数组，所以也需要进行观察，\n*  原数组数据的更改，可能引起页面视图改变，所以也要观察\n*/\nimport { ARR_METHODS } from \"../config\";\nimport observeArr from \"./observeArr\";\n//originArrMethods获取到原型\nvar originArrMethods = Array.prototype;\n// 创建新的对象实例，arrMthods的原型为originArrMethods\nvar arrMethods = Object.create(originArrMethods);\n\nARR_METHODS.map(function (m) {\n  arrMethods[m] = function () {\n    // arguments是类数组，Array.prototype.slice.call生成一个数组\n    var args = Array.prototype.slice.call(arguments);\n    // 原来数组的功能仍然需要保证\n    // this指向调用数组方法本身的对象，例如[1,2,3].splice(0,1,3),this就指向[1,2,3]\n    var rt = originArrMethods[m].apply(this, args);\n    var newArr;\n    switch (m) {\n      case \"push\":\n      case \"unshift\":\n        newArr = args;\n        break;\n      case \"splice\":\n        newArr = args.slice(2);\n        break;\n      default:\n        break;\n    }\n    // newArr是一个数组，所以可以直接observeArr进行递归，而不需要进入到observe流程\n    newArr && observeArr(newArr);\n    return rt;\n  };\n});\nexport { arrMethods };\n","import defineReactiveData from './reactive'\nimport observeArr from './observeArr'\nimport {arrMethods} from './array'\nfunction Observer(data){\n    if(Array.isArray(data)){\n        // 覆盖原本的__proto__\n        data.__proto__=arrMethods\n        // data是数组，数组内部可能出现对象或者数组，所以需要对数组内部每一项进行观察\n        observeArr(data)\n    }else{\n        this.walk(data);\n    }\n}\nObserver.prototype.walk=function(data){\n    var keys=Object.keys(data);\n    for(var i=0;i<keys.length;i++){\n        var key=keys[i];\n        var value=data[key];\n        defineReactiveData(data,key,value);\n    }\n}\n\nexport default Observer;","import Observer from \"./observer\"\nfunction observe(data){\n    if(typeof data!=='object' || data===null) return;\n    new Observer(data)\n}\nexport default observe","import proxyData from './observer/proxy'\nimport observe from './observer/observe'\nfunction initState(vm) {\n  var options = vm.$options;\n  if (options.data) {\n    initData(vm);\n  }\n}\n\nfunction initData(vm) {\n  // 不污染用户原本的data\n  var data = vm.$options.data;\n  // data原本是一个方法，执行后可以通过vm._data.xxx这样获取\n  data = typeof data === \"function\" ? data.call(vm) : data || {};\n  vm._data = data;\n  for(var key in data){\n      // 将对象访问从vm._data.xxx变成vm.xxx的形式\n      proxyData(vm, '_data', key);\n  }\n  // 观察者模式_data\n  observe(vm._data);\n}\n\nexport { initState };\n","/**\n * 添加属性到 attrs 中。\n * @param {Object} attrs \n * @param {string} key \n * @param {string} value \n */\nfunction addAttr (attrs, key, value) {\n  if (!attrs || value === undefined || value === null) return;\n  \n  if (key === 'style') {\n    attrs[key] = value;\n  } else {\n    attrs[key] = value;\n  }\n  \n}\n\nexport{\n  addAttr,\n}\n\n","import { addAttr } from '../helper/utils'\n/*\n  <div id=\"app\" style=\"color: red; font-size: 20px\">\n    你好 {{name}} {{info.students[0].name}}\n    <span class=\"text\" style=\"color: green\">{{info.job}}</span>\n    <p>学习</p>\n  </div>\n*/\n\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\n// 标签名 <my-header></my-header>\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\n// <my:header></my:header>\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\n// <div\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\n// > />\nconst startTagClose = /^\\s*(\\/?)>/\n// </div>\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\n\n/**\n * 将模板 html 转换为 ast。\n * 不断截取 html，并进行解析成抽象语法树。\n * @param {string} html 模板 html\n */\nfunction parseHtmlToAst (html) {\n  let root = null;\n  let  currentParent = null;\n  const stack = [];  \n\n  while (html) {\n    let textEnd = html.indexOf('<');\n    let text = null;\n\n    if (textEnd === 0) {\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      \n      const endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        continue;\n      }\n    } else if (textEnd > 0) {\n      text = html.substring(0, textEnd);\n      \n      if (text) {\n        advance(text.length);\n        chars(text);\n        text = null;\n      }\n    }\n  }\n\n  /**\n   * 解析开始标签。\n   * @example <div> -> { tagName: 'div', attrs: []};\n   * @example <div id=\"foo\"> -> { tagName: 'div', attrs: {id: 'foo'} };\n   */\n  function parseStartTag () {\n    const start = html.match(startTagOpen);\n\n    /** @type {Array | null} @example [] */\n    let end = null;\n    /** @type {Array | null}; @example [' id=\"app\"', 'id', '=', 'app'] */\n    let attrs = null;\n\n    if (start) {\n      /** @example ['<div', 'div', ...] */\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      }\n      advance(start[0].length);\n      \n      /** 匹配属性 */\n      \n      while (!(end = html.match(startTagClose)) && \n        (attrs = html.match(attribute))) {\n\n        addAttr(match.attrs, attrs[1], \n          attrs[3] || attrs[4] || attrs[5]);\n\n        advance(attrs[0].length);\n      }\n\n      if (end) {\n        advance(end[0].length);\n        return match;\n      }\n    }\n    \n  }\n  \n  /**\n   * 将 html 往前推进 `n` 步。\n   * @param {number} n 前进的步数。\n   */\n  function advance (n) {\n    html = html.substring(n);\n  }\n  \n  function start (tagName, attrs) {\n    const element = createASTElement(tagName, attrs);\n    if (!root) {\n      root = element;\n    }\n    \n    currentParent = element;\n    stack.push(element);\n  }\n\n  function end (tagName) {\n    const element = stack.pop();\n    currentParent = stack[stack.length - 1];\n    if (currentParent) {\n      element.parent = currentParent;\n      currentParent.children.push(element);\n    }\n  }\n\n  /**\n   * 根据输入生成 AST 文本结点。\n   * @param {string} text \n   */\n  function chars (text) {\n    text = text.trim();\n    if (text.length > 0) {\n      currentParent.children.push({\n        text,\n        type: 3,\n      })\n    }\n  }\n\n  function createASTElement (tagName, attrs, parent = undefined) {\n    return {\n      tag: tagName,\n      type: 1,\n      children: [],\n      attrs,\n      parent\n    }\n  }\n  \n  return root;\n}\n\nexport { \n  parseHtmlToAst,\n}","import { parseHtmlToAst} from './astParser';\n\n/**\n * 将 html string 转化为 render 函数。\n * @param {string} html html string with template.\n */\nfunction compileToRenderFunction (html) {\n  // console.log(html);\n  \n  const ast = parseHtmlToAst(html);\n  console.log('compiler.index: ', ast);\n}\n\nexport {\n  compileToRenderFunction,\n}\n","import { initState } from './state';\nimport { compileToRenderFunction } from './compiler';\n\n/**\n * 初始化混入函数。\n * @param { VueStatic } Vue\n */\nfunction initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options;\n    initState(vm);\n    \n\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  }\n  \n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n\n    el = typeof el === 'string'\n          ? document.querySelector(el)\n          : el;\n    \n    vm.$el = el;\n    if (!options.render) {\n      let template = options.template || el.outerHTML;\n\n      options.render = compileToRenderFunction(template);\n    }\n  }\n}\n\nexport {\n  initMixin,\n}","import { initMixin } from './init';\n\nfunction Vue (options) {\n  this._init(options);\n}\n\ninitMixin(Vue)\n\nexport default Vue;"],"names":["proxyData","vm","target","key","Object","defineProperty","get","set","newValue","defineReactiveData","data","value","observe","console","log","observeArr","arr","i","length","ARR_METHODS","originArrMethods","Array","prototype","arrMethods","create","map","m","args","slice","call","arguments","rt","apply","newArr","Observer","isArray","__proto__","walk","keys","initState","options","$options","initData","_data","addAttr","attrs","undefined","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHtmlToAst","html","root","currentParent","stack","textEnd","indexOf","text","startTagMatch","parseStartTag","start","tagName","endTagMatch","match","advance","end","substring","chars","n","element","createASTElement","push","pop","parent","children","trim","type","tag","compileToRenderFunction","ast","initMixin","Vue","_init","el","$mount","document","querySelector","$el","render","template","outerHTML"],"mappings":"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"}